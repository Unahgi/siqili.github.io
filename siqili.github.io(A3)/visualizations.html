<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Art Visualizations - Siqi Li</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Visual Explorations</h1>
        <nav>
            <a href="index.html">← Back to Home</a>
        </nav>
    </header>

    <main>

        <!-- Vega-Lite Data Visualizations -->
        <section class="section">
            <h2>Vega-Lite Data Visualizations</h2>
            <div class="visualization-container">
                <div id="chart1"></div>
            </div>
            <div class="art-description">
                <h3>Visualization 1: Global Sales by Genre and Platform</h3>
                <p>A heatmap showing global sales across platforms and genres, simple and clear.</p>
                <p>Summary: Some platform–genre pairs stand out; home consoles are strong in Action and Sports.</p>
            </div>
        </section>

        <section class="section">
            <div class="visualization-container">
                <div id="chart2"></div>
            </div>
            <div class="art-description">
                <h3>Visualization 2: Sales Over Time by Platform and Genre</h3>
                <p>Small-multiple line charts show annual sales trends by platform within popular genres.</p>
                <p>Summary: Platforms peak in different years; popular genres exhibit varying temporal cycles.</p>
            </div>
        </section>

        <section class="section">
            <div class="visualization-container">
                <div id="chart3"></div>
            </div>
            <div class="art-description">
                <h3>Visualization 3: Regional Sales vs. Platform</h3>
                <p>Using a folded long table, a stacked bar chart compares platform sales across regions.</p>
                <p>Summary: Platforms are stronger in North America and Europe; Japan shows distinct preferences.</p>
            </div>
        </section>

        <section class="section">
            <div class="visualization-container">
                <div id="chart4"></div>
            </div>
            <div class="art-description">
                <h3>Visualization 4: JP Sales by Genre (Visual Story)</h3>
                <p>Focusing on the Japanese market, compare total sales by genre to reveal preference patterns.</p>
                <p>Summary: Role-Playing is especially prominent in Japan; preferences differ from the global picture.</p>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Siqi Li. </p>
    </footer>

    

    <!-- Vega-Lite (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

    <!-- Vega-Lite specs and embedding -->
    <script>
      const wideUrl = 'https://raw.githubusercontent.com/SIAT-IAT-355/A3-Intro-to-vegalite/main/dataset/videogames_wide.csv';

      // Visualization 1: Global Sales by Genre and Platform (Heatmap)
      const spec1 = {
        $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
        data: { url: wideUrl },
        transform: [
          { aggregate: [{ op: 'sum', field: 'Global_Sales', as: 'global' }], groupby: ['Genre', 'Platform'] }
        ],
        mark: 'rect',
        width: 600,
        height: 400,
        encoding: {
          x: { field: 'Platform', type: 'nominal', axis: { labelAngle: -45 }, sort: 'ascending' },
          y: { field: 'Genre', type: 'nominal', sort: 'ascending' },
          color: { field: 'global', type: 'quantitative', title: 'Global Sales (M)', scale: { scheme: 'blues' } },
          tooltip: [
            { field: 'Genre', type: 'nominal' },
            { field: 'Platform', type: 'nominal' },
            { field: 'global', type: 'quantitative', format: '.2f', title: 'Global Sales (M)' }
          ]
        }
      };

      // Visualization 2: Sales Over Time by Platform and Genre (Small multiples lines)
      const spec2 = {
        $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
        data: { url: wideUrl },
        transform: [
          // Top 6 genres by total global sales
          { joinaggregate: [{ op: 'sum', field: 'Global_Sales', as: 'total_genre_sales' }], groupby: ['Genre'] },
          { window: [{ op: 'rank', as: 'genre_rank' }], sort: [{ field: 'total_genre_sales', order: 'descending' }] },
          { filter: 'datum.genre_rank <= 6' },
          // Top 5 platforms by total global sales
          { joinaggregate: [{ op: 'sum', field: 'Global_Sales', as: 'total_platform_sales' }], groupby: ['Platform'] },
          { window: [{ op: 'rank', as: 'platform_rank' }], sort: [{ field: 'total_platform_sales', order: 'descending' }] },
          { filter: 'datum.platform_rank <= 5' },
          // Aggregate yearly totals within filtered subsets
          { aggregate: [{ op: 'sum', field: 'Global_Sales', as: 'year_global' }], groupby: ['Genre', 'Platform', 'Year'] }
        ],
        mark: { type: 'line', point: true },
        width: 250,
        height: 180,
        encoding: {
          x: { field: 'Year', type: 'quantitative', axis: { tickCount: 10 } },
          y: { field: 'year_global', type: 'quantitative', title: 'Global Sales (M)' },
          color: { field: 'Platform', type: 'nominal' },
          tooltip: [
            { field: 'Genre', type: 'nominal' },
            { field: 'Platform', type: 'nominal' },
            { field: 'Year', type: 'quantitative' },
            { field: 'year_global', type: 'quantitative', format: '.2f', title: 'Global Sales (M)' }
          ],
          column: { field: 'Genre', type: 'nominal' }
        },
        config: { view: { stroke: 'transparent' } }
      };

      // Visualization 3: Regional Sales vs. Platform (Stacked Bars)
      const spec3 = {
        $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
        data: { url: wideUrl },
        transform: [
          { fold: ['NA_Sales', 'EU_Sales', 'JP_Sales', 'Other_Sales'], as: ['Region', 'Sales'] },
          { joinaggregate: [{ op: 'sum', field: 'Sales', as: 'total_platform_sales' }], groupby: ['Platform'] },
          { window: [{ op: 'rank', as: 'platform_rank' }], sort: [{ field: 'total_platform_sales', order: 'descending' }] },
          { filter: 'datum.platform_rank <= 10' }
        ],
        mark: 'bar',
        width: 800,
        height: 400,
        encoding: {
          x: { field: 'Platform', type: 'nominal', axis: { labelAngle: -45 } },
          y: { aggregate: 'sum', field: 'Sales', type: 'quantitative', title: 'Sales (M)' },
          color: { field: 'Region', type: 'nominal', title: 'Region' },
          tooltip: [
            { field: 'Platform', type: 'nominal' },
            { field: 'Region', type: 'nominal' },
            { aggregate: 'sum', field: 'Sales', type: 'quantitative', format: '.2f', title: 'Sales (M)' }
          ]
        }
      };

      // Visualization 4: JP Sales by Genre (Visual Story)
      const spec4 = {
        $schema: 'https://vega.github.io/schema/vega-lite/v5.json',
        data: { url: wideUrl },
        transform: [
          { aggregate: [{ op: 'sum', field: 'JP_Sales', as: 'jp' }], groupby: ['Genre'] }
        ],
        mark: 'bar',
        width: 800,
        height: 400,
        encoding: {
          x: { field: 'Genre', type: 'nominal', sort: '-y', axis: { labelAngle: -45 } },
          y: { field: 'jp', type: 'quantitative', title: 'JP Sales (M)' },
          color: { field: 'Genre', type: 'nominal', legend: null },
          tooltip: [
            { field: 'Genre', type: 'nominal' },
            { field: 'jp', type: 'quantitative', format: '.2f', title: 'JP Sales (M)' }
          ]
        }
      };

      vegaEmbed('#chart1', spec1, { actions: false });
      vegaEmbed('#chart2', spec2, { actions: false });
      vegaEmbed('#chart3', spec3, { actions: false });
      vegaEmbed('#chart4', spec4, { actions: false });
    </script>

    <style>
        .visualization-container {
            display: flex;
            justify-content: center;
            margin: 2rem 0;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .art-description {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
            border-left: 4px solid #667eea;
        }

        .art-description h3 {
            color: #667eea;
            margin-bottom: 1rem;
        }

        .art-description ul {
            list-style: none;
            padding: 0;
        }

        .art-description li {
            padding: 0.5rem 0;
            border-bottom: 1px solid #e9ecef;
        }

        .art-description li:last-child {
            border-bottom: none;
        }

        .process-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .process-item {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .process-item h3 {
            color: #667eea;
            margin-bottom: 1rem;
        }

        #vis {
            transition: all 0.3s ease;
        }

        #vis:hover {
            transform: scale(1.02);
        }
    </style>
</body>
</html>
